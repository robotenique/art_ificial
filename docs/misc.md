# Functions

## Oscillator (function)

To generating a recurring pattern we can use the basic trigonometric functions:
- $sin$
- $cos$
- $tg$

### Type 1

An initial usage can be something like:

```java
float res = abs(sin(k*x)) + h
```
[Desmos](https://www.desmos.com/calculator/a9dokhqj2i)

- `k`: Controls the "amplitude"/"velocity" of the wave; The lower this number the "slowest"/"widest" is the wave;
- `h`: Y-axis offset: useful for when you don't things going below zero, or to use this function as a multiplicative factor (i.e. a percentage);
- `abs`: Transforms the `sin` into a "bouncy" function shape. Also useful to automatically remove all negative values (the same can be achieved with `h`);

### Type 2

More complex or irregular scenarios can be generated by just summing up a bunch of `sin` and `cos` functions, with different parameters (possibly randomly generated) for each one of them. This can create lot of variety in stuff like movement or dictate other patterns.

```java
float a = sin(x) + 1;
float b = cos(0.1*x) + 1;
float c = sin(0.5*x) + 1;
float res = a + b + c;
```
[Desmos](https://www.desmos.com/calculator/a9dokhqj2i)

### Type 3

Another repeating pattern but combines convex and concave inversions over and over again. I found it useful to generate some color patterns (each RGB component is generated by the same function translated to generate variety of color):

```java
float componentR = floor(100*exp(sin(0.005*millis() + 1)) - 16); // the 100 an -16 adjustments are done to scale to 255
float componentG = floor(100*exp(sin(0.005*millis() - 1)) - 16); // the 0.005 controls the frequency
float componentB = floor(100*exp(sin(0.005*millis() + 2)) - 16); // the +2 is the x-axis translation
```
[Desmos](https://www.desmos.com/calculator/6otsu0c3fs)

# Snippets


## Oscillator (array)

To go from 0 to k then descend from k to 0 we can use this simple loop logic:

```java
int auxV = 1;
int indexCycle = 0;
while(condition) {
indexCycle += auxV;
if (indexCycle == (arrayLength - 1))
    auxV = -1;
if (indexCycle == 0)
    auxV = 1;
}
```

`indexCycle` is the looping variable.


## Video

Pre-requisite: Have `ffmpeg` installed ([ffmpeg (Windows version)](https://www.wikihow.com/Install-FFmpeg-on-Windows)).

In the sketch add this code in `draw()` to save every frame (changing name ofc):

```java
void saveIfNeeded(){ 
  float seconds = (float)(millis())/1000;
  if (saveFrames && seconds < timeToRecord)
    saveFrame("imgDump/crazyt-#####.png");
}
```

Run the Sketch up until a specific point, then exit when finished.
To convert the frames into a video, run the following command, changing the framerate to what you really want and the name of the file to the correct pattern:

```
ffmpeg -framerate 60 -i imgDump/crazyt-%05d.png -crf 18 output.mp4
```

To generate a GIF: 
```
ffmpeg -framerate 60 -i imgDump/crazyt-%05d.png -vf scale=480x240 output.gif
```

**Important:** Saving frames makes the sketch go really slow, so, AVOID using variables like `millis()` and prefer using the frames since they'll be fixed and not dependant on the rendering speed of your PC!! I had to do some gambiarra on `crazy_triangles` sketch to make this go away.